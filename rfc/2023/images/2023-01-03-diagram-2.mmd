graph LR

    A1((Public)) ==> B1{TIC}
    B1 ==> C1(NGINX\nRevProxy\nSSL term)
    C1 == prod ==> D1(BRD\nVM\nPEP)
    D1:::fillPEP <==> F1(Old SSOe\nID.me,...):::fillIDP
    classDef fillPEP fill:#f96
    classDef fillIDP fill:#6f9

    A2((Private)) --  SOCKS/VPN --> B2(Kong\nTemporary\nIntegration)
    C1 -. dev .-> B2   
    B2 -.-> D2(Traefik\nIngress\nController)  
    subgraph EKS
    E2 -.-> F21(MS1\nPod\nPEP1)
    E2 -.-> F22(MS2\nPod\nPEP2)
    E2 -.-> F23(MS...\nPod\nPEP)
    end
    D2 -.-> E2{Ingress}
    F21:::fillPEP <-.-> F1
    F22:::fillPEP <-.-> F2(SSO of GitHub\nOAuth Apps):::fillIDP
    F23:::fillPEP <-.-> F3(Basic Auth):::fillIDP